## hw13

2. Explain TLS, PKI, certificate, public key, private key, and signature. 

   >**TLS**: Transport Layer Security. TLS is a cryptographic protocol designed to provide secure communication between web browsers and servers over the internet.
   >
   >**PKI**: Public key infrastructure: create, manage, distribute, use, store and revoke certificates and manage public-key encryption. 
   >
   >**Certificate**: A digital certificate is an electronic document used to prove the ownership of a public key.
   >
   >**Public Key**: This is widely distributed and can be sent over non-secure channels. Public keys are used to encrypt data that only the private key can decrypt, or to verify a signature made with a private key.
   >
   >**Private Key**: This is kept secret by the owner and is used to decrypt data encrypted with the corresponding public key or to create a digital signature that can be verified by anyone having the public key.
   >
   >**Signature**: A digital signature is a mathematical technique used to validate the authenticity and integrity of a message, software, or digital document.

3. list all http status codes that related to authentication and authorization failures. 

   >1. **401 Unauthorized**
   >
   >   This status code indicates that the request has not been applied because it lacks valid authentication credentials for the target resource. It is commonly used when authentication is required and has failed or has not yet been provided.
   >
   >2.  **403 Forbidden**
   >
   >   This status code indicates that the server understood the request but refuses to authorize it. A 403 status is typically returned even if the client is authenticated but does not have the permissions needed for the resource.
   >
   >3. **407 Proxy Authentication Required**
   >
   >   This status code is similar to 401, but it indicates that the client must first authenticate itself with the proxy. The proxy server needs to authorize the client before sending their request to the server.

4. Compare authentication and authorization? 

   >| Aspect               | Authentication                                               | Authorization                                                |
   >| -------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
   >| **Definition**       | In the authentication process, the identity of users is checked for providing access to the system. | In the authorization process, person’s or user’s authorities are checked for accessing the resources. |
   >| **Verification**     | Users or persons are verified.                               | Users or persons are validated.                              |
   >| **Process Order**    | It is done before the authorization process.                 | This process is done after the authentication process.       |
   >| **Requirements**     | Usually requires user's login details.                       | Requires user's privilege or security levels.                |
   >| **Purpose**          | Determines whether the person is a user or not.              | Determines what permission the user has.                     |
   >| **Information Type** | Generally, transmits information through an ID Token.        | Generally, transmits information through an Access Token.    |
   >| **Example**          | Employees in a company are required to authenticate through the network before accessing their company email. | After an employee successfully authenticates, the system determines what information the employees are allowed to access. |

5. What is HTTP Session? 

   >An HTTP session is a way to store information (in variables) to be used across multiple pages on a web server. Unlike a cookie, the information is not stored on the user's computer; instead, it is stored on the server.

6. What is Cookie? 

   >A cookie is a small piece of data sent from a website and stored on the user's computer by the user's web browser while the user is browsing.

7. What is the difference between Session and Cookie? 

   >| **Cookie**                                                   | **Session**                                                  |
   >| ------------------------------------------------------------ | ------------------------------------------------------------ |
   >| Cookies are client-side files on a local computer that hold user information. | Sessions are server-side files that contain user data.       |
   >| Cookies end on the lifetime set by the user.                 | When the user quits the browser or logs out of the programmed, the session is over. |
   >| It can only store a certain amount of info.                  | It can hold an indefinite quantity of data.                  |
   >| The browser’s cookies have a maximum capacity of 4 KB.       | We can keep as much data as we like within a session, however there is a maximum memory restriction of 128 MB that a script may consume at one time. |
   >| Because cookies are kept on the local computer, we don’t need to run a function to start them. | To begin the session, we must use the session start() method. |
   >| Cookies are not secured.                                     | Session are more secured compare than cookies.               |
   >| Cookies stored data in text file.                            | Session save data in encrypted form.                         |
   >| Cookies stored on a limited data.                            | Session stored a unlimited data.                             |
   >| In PHP, to get the data from Cookies , $_COOKIES the global variable is used | In PHP, to get the data from Session, $_SESSION the global variable is used |
   >| We can set an expiration date to delete the cookie’s data. It will automatically delete the data at that specific time. | In PHP, to destroy or remove the data stored within a session, we can use the session_destroy() function, and to unset a specific variable, we can use the unset() function. |

8. How do we use session and cookie to keep user information across the the application? 

   >**sessions are saved on the server side while cookies are saved on the client side**

9. What is JWT? 

   >**JWT (JSON Web Token)** is a compact, URL-safe means of representing claims to be transferred between two parties. It allows you to encode JSON data as a string that can be easily passed in HTML and HTTP environments.

10. What is the spring security filter? 

    >In the context of Spring Security, a **filter** is a Java object that performs filtering tasks on either the request to a resource (a servlet or static content), or on the response from a resource, or both. Filters in Spring Security form a chain that is applied to incoming HTTP requests on the server. This chain is known as the **filter chain**. Each filter has a specific task, such as authentication, logging, or managing CORS policies, and the filters are processed in a specific order.

11. Explain how JWT works 

    >A JWT is composed of three parts, each separated by a dot (`.`):
    >
    >1. **Header**
    >2. **Payload**
    >3. **Signature**
    >
    >![image-20240717162843711](images//image-20240717162843711.png)

12. Explain how do we store sensitive user information such as password and credit card number in DB? 

    >Add salt and hash them

13. Compare UserDetailService, AuthenticationProvider, AuthenticationManager, AuthenticationFilter?(把这⼏ 个名字看熟悉也⾏) 

    >https://www.javainuse.com/webseries/spring-security-jwt/chap3

14. What is the disadvantage of Session? how to overcome the disadvantage? 

    >1. **Resource Intensive**
    >2. **Scalability**
    >3. **Security Risks**
    >4. **Performance Bottlenecks**
    >5. **Expiration and Session Management**
    >
    >**Token-Based Authentication**: Using JWT for authentication and storing user session data can reduce server load by eliminating the need to store session data server-side. The token is stored client-side and sent with each request, containing all necessary data to authenticate and authorize the request.

15. how to get value from application.properties in Spring security? 

    >1. @Value
    >
    >2. org.springframework.core.env.Environment
    >
    >   ```java
    >   @Autowired
    >   private Environment env;
    >   
    >   env.getProperty("userBucket.path");
    >   ```
    >
    >3. ```java
    >   @ConfigurationProperties(prefix = "cust.data.employee")
    >   @Configuration("employeeProperties")
    >   public class Employee {
    >   
    >       private String name;
    >       private String dept;
    >   
    >       //Getters and Setters go here
    >   }
    >   ```
    >
    >   ```java
    >   @Autowired
    >   private Employee employeeProperties;
    >   
    >   public void method() {
    >   
    >      String employeeName = employeeProperties.getName();
    >      String employeeDept = employeeProperties.getDept();
    >   
    >   }
    >   ```
    >
    >4. ```java
    >   @Component
    >   @PropertySource("classpath:application.properties")
    >   public class ConfigProperties {
    >   
    >       @Autowired
    >       private Environment env;
    >   
    >       public String getConfigValue(String configKey){
    >           return env.getProperty(configKey);
    >       }
    >   }
    >   ```

16. What is the role of configure(HttpSecurity http) and configure(AuthenticationManagerBuilder auth)? 

    >**configure(HttpSecurity)** allows configuration of web based security at a resource level, based on a selection match - e.g. The example below restricts the URLs that start with /admin/ to users that have ADMIN role, and declares that any other URLs need to be successfully authenticated.
    >
    >**configure(WebSecurity)** is used for configuration settings that impact global security (ignore resources, set debug mode, reject requests by implementing a custom firewall definition). For example, the following method would cause any request that starts with /resources/ to be ignored for authentication purposes.

17. What is Spring security authentication and authorization?

    >Authentication verify if the user logins
    >
    >Authorization check if the user has the permission.